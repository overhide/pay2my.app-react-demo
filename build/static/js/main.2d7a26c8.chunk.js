(this["webpackJsonppay2myapp-widgets-react-demo-app"]=this["webpackJsonppay2myapp-widgets-react-demo-app"]||[]).push([[0],{11:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),r=n(17),i=n.n(r),a=(n(24),n(10)),o=n(3),d=(n(25),n(11),n(6)),u=n.n(d),l=n(18),b=n(0),h=function(e){var t=Object(s.useRef)(),n=Object(s.useState)(null),c=Object(o.a)(n,2),r=c[0],i=c[1],a=function(t){e.onPendingTransaction&&e.onPendingTransaction(t.detail.currency,t.detail.isPending)};return Object(s.useEffect)((function(){if(e.onHubInit){var n=t.current;e.onHubInit(n)}fetch("".concat("https://demo-back-end.azurewebsites.net/api","/GetToken")).then(function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=8;break}return e.t0=i,e.next=4,t.text();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=9;break;case 8:console.error("error talking to back-end -- ".concat(t.status," &mdash; ").concat(t.statusText));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error("error talking to back-end -- ".concat(e))}))}),[t]),Object(s.useEffect)((function(){var e=t.current;return e.addEventListener("pay2myapp-hub-pending-transaction",a),function(){return e.removeEventListener("pay2myapp-hub-pending-transaction",a)}}),[t]),Object(b.jsx)("div",{children:Object(b.jsx)("pay2myapp-hub",{ref:t,token:r,isTest:e.isTest})})},j=function(e){var t=Object(s.useRef)();return Object(s.useEffect)((function(){if(t){var n=t.current;e.hub&&n.setHub&&n.setHub(e.hub)}}),[e.hub]),Object(b.jsx)("div",{children:Object(b.jsx)("pay2myapp-status",{ref:t})})},f=function(e){var t=Object(s.useRef)();return Object(s.useEffect)((function(){if(t){var n=t.current;e.hub&&n.setHub&&n.setHub(e.hub)}}),[e.hub]),Object(b.jsx)("div",{children:Object(b.jsx)("pay2myapp-login",{ref:t,overhideSocialMicrosoftEnabled:!0,overhideSocialGoogleEnabled:!0,overhideWeb3Enabled:!0,ethereumWeb3Enabled:!0,bitcoinEnabled:!0,overhideSecretTokenEnabled:!0})})},v=(n(28),function(e){var t=Object(s.useRef)();return Object(s.useEffect)((function(){if(t){var n=t.current;e.hub&&n.setHub&&n.setHub(e.hub)}}),[e.hub]),Object(b.jsx)("div",{children:Object(b.jsx)("pay2myapp-appsell",{ref:t,loginMessage:"Login",children:Object(b.jsx)("div",{slot:"unauthorized-button",className:"neopolitan-button"})})})}),p=function(e){var t=Object(s.useRef)(),n=function(t){console.log("sku-clicked :: ".concat(JSON.stringify(t.detail,null,2))),fetch("".concat("https://demo-back-end.azurewebsites.net/api","/RunFeature")+"?sku=".concat(t.detail.sku)+"&currency=".concat(t.detail.currency)+"&from=".concat(t.detail.from)+"&isTest=".concat(t.detail.isTest)+"&message=".concat(btoa(t.detail.message))+"&signature=".concat(btoa(t.detail.signature))).then((function(n){n.ok?e.onAddMessage&&e.onAddMessage(t.detail.sku):e.onAddError&&e.onAddError("error talking to back-end &mdash; ".concat(n.status," &mdash; ").concat(n.statusText))})).catch((function(t){return e.onAddError&&e.onAddError("error talking to back-end &mdash; ".concat(t))}))};return Object(s.useEffect)((function(){if(t){var n=t.current;e.hub&&n.setHub&&n.setHub(e.hub)}}),[e.hub]),Object(s.useEffect)((function(){var e=t.current;return e.addEventListener("pay2myapp-appsell-sku-clicked",n),function(){return e.removeEventListener("pay2myapp-appsell-sku-clicked",n)}}),[e.hub]),Object(b.jsx)("div",{children:Object(b.jsx)("pay2myapp-appsell",{ref:t,sku:e.sku,priceDollars:e.priceDollars,authorizedMessage:e.authorizedMessage,unauthorizedTemplate:e.unauthorizedTemplate,bitcoinAddress:e.bitcoinAddress,ethereumAddress:e.ethereumAddress,overhideAddress:e.overhideAddress,withinMinutes:e.withinMinutes})})},g=n(19),O=(n(29),function(e){var t=[],n=1;console.log("MESSAGES :: ".concat(t.length));var s,c=Object(g.a)(e.messages);try{for(c.s();!(s=c.n()).done;){var r=s.value;t.push(Object(b.jsx)("div",{className:"w3-col s8 w3-center ".concat(r.isError?"w3-panel w3-pale-red w3-display-container":"w3-panel w3-pale-green w3-display-container"),children:Object(b.jsx)("p",{children:r.text})},n++))}}catch(i){c.e(i)}finally{c.f()}return Object(b.jsx)("div",{className:"w3-row messages-envelope",children:t})}),x=function(e){var t=Object(s.useState)(!1),n=Object(o.a)(t,2),c=n[0],r=n[1],i=Object(s.useState)(),d=Object(o.a)(i,2),u=d[0],l=d[1],g=Object(s.useState)([]),x=Object(o.a)(g,2),m=x[0],w=x[1],k=function(e){m.unshift({text:"".concat(new Date," -- ").concat(e," feature used"),isError:!1}),w(Object(a.a)(m))},A=function(e){m.unshift({text:e,isError:!0}),w(Object(a.a)(m))};return Object(b.jsxs)("div",{children:[Object(b.jsx)("img",{className:"visa ".concat(c?"visible":"invisible"),id:"visa",src:"".concat("https://overhide.github.io/pay2myapp-widgets-react-demo-app/build","/visa.png"),alt:""}),Object(b.jsx)(h,{isTest:!0,onHubInit:function(e){e&&l(e)},onPendingTransaction:function(e,t){console.log("pending-transaction :: ".concat(JSON.stringify({currency:e,isPending:t}))),"dollars"===e&&r(t)}}),Object(b.jsx)("div",{className:"w3-bar w3-border w3-light-grey",children:Object(b.jsx)("div",{className:"w3-right",children:Object(b.jsx)(j,{hub:u})})}),Object(b.jsx)("div",{className:"w3-container note-container",children:Object(b.jsxs)("div",{className:"w3-card w3-sand w3-margin note",children:[Object(b.jsx)("img",{className:"w3-left info",src:"".concat("https://overhide.github.io/pay2myapp-widgets-react-demo-app/build","/info.png")}),Object(b.jsx)("p",{children:"The basic demo showing off all widgets as part of a React.js application.  Using features causes back-end endpoint invocations with authorization checks."}),Object(b.jsxs)("p",{children:["In the top-right we see the ",Object(b.jsx)("em",{children:"pay2myapp-status"})," widget \u2014 allows (re)login, transaction check, logout, and payments refresh."]}),Object(b.jsxs)("p",{children:['Just below we see an explicit "login" button (',Object(b.jsx)("em",{children:"pay2myapp-appsell"})," widget).  This button always allows (re)login and never starts a feature flow.  This button has some custom neopolitan themed color scheme CSS."]}),Object(b.jsxs)("p",{children:["At the bottom we see three feature buttons (",Object(b.jsx)("em",{children:"pay2myapp-appsell"})," widgets).  These cause initial login and feature flows \u2014 through the backe-end \u2014 at different payment tiers."]}),Object(b.jsx)("p",{children:Object(b.jsx)("a",{href:"https://github.com/overhide/pay2myapp-widgets#demos",children:"...back to demos"})})]})}),Object(b.jsx)(f,{hub:u}),Object(b.jsxs)("div",{className:"w3-row w3-padding-64",children:[Object(b.jsx)("div",{className:"w3-col s4",children:"\xa0"}),Object(b.jsx)("div",{className:"w3-col s4 w3-center",children:Object(b.jsx)(v,{hub:u})})]}),Object(b.jsxs)("div",{className:"w3-row appsell-envelope",children:[Object(b.jsx)("div",{className:"w3-col s4 w3-center",children:Object(b.jsx)(p,{hub:u,sku:"free-feature",priceDollars:"0",authorizedMessage:"Use Feature",unauthorizedTemplate:"Login to Use Free Feature",bitcoinAddress:"tb1qr9d7z0es86sps5f2kefx5grpj4a5yvp4evj80z",ethereumAddress:"0x046c88317b23dc57F6945Bf4140140f73c8FC80F",overhideAddress:"0x046c88317b23dc57F6945Bf4140140f73c8FC80F",onAddMessage:k,onAddError:A})}),Object(b.jsx)("div",{className:"w3-col s4 w3-center",children:Object(b.jsx)(p,{hub:u,sku:"paid-feature",priceDollars:"2",authorizedMessage:"Use Feature",unauthorizedTemplate:"Add Feature ($${topup})",bitcoinAddress:"tb1qr9d7z0es86sps5f2kefx5grpj4a5yvp4evj80z",ethereumAddress:"0x046c88317b23dc57F6945Bf4140140f73c8FC80F",overhideAddress:"0x046c88317b23dc57F6945Bf4140140f73c8FC80F",onAddMessage:k,onAddError:A})}),Object(b.jsx)("div",{className:"w3-col s4 w3-center",children:Object(b.jsx)(p,{hub:u,sku:"subscribed-feature",priceDollars:"3",authorizedMessage:"Use Feature",unauthorizedTemplate:"Subscribe Feature For 30 Minutes ($${topup})",bitcoinAddress:"tb1qr9d7z0es86sps5f2kefx5grpj4a5yvp4evj80z",ethereumAddress:"0x046c88317b23dc57F6945Bf4140140f73c8FC80F",overhideAddress:"0x046c88317b23dc57F6945Bf4140140f73c8FC80F",withinMinutes:"30",onAddMessage:k,onAddError:A})})]}),Object(b.jsx)("div",{className:"w3-row w3-padding-64",children:Object(b.jsx)("div",{className:"w3-col w3-center",children:Object(b.jsx)(O,{messages:m})})})]})},m=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),s(e),c(e),r(e),i(e)}))},w=n(5);w.OverhideHub,w.OverhideStatus,w.OverhideLogin,w.OverhideAppsell,i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(x,{})}),document.getElementById("root")),m()}},[[51,1,2]]]);
//# sourceMappingURL=main.2d7a26c8.chunk.js.map